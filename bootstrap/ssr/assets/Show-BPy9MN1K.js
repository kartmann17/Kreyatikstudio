import{jsx as e,jsxs as t}from"react/jsx-runtime";import{Link as a}from"@inertiajs/react";import{C as r}from"./ClientLayout-C2WO633L.js";import"react";function s({project:s,tasks:l,taskProgress:i}){const d=e=>{switch(e){case"basse":return"bg-blue-100 text-blue-800";case"moyenne":return"bg-yellow-100 text-yellow-800";case"haute":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},n=e=>{if(!e)return"Non définie";return new Date(e).toLocaleDateString("fr-FR")},c=l.filter(e=>e.is_completed).length;return e(r,{pageTitle:s.name,children:t("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e("div",{className:"mb-4",children:e("nav",{className:"flex","aria-label":"Breadcrumb",children:t("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[e("li",{className:"inline-flex items-center",children:t(a,{href:"/client/dashboard",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600",children:[e("i",{className:"fas fa-home mr-2"}),"Tableau de bord"]})}),e("li",{children:t("div",{className:"flex items-center",children:[e("svg",{className:"w-3 h-3 text-gray-400 mx-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e(a,{href:"/client/projects",className:"ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2",children:"Projets"})]})}),e("li",{"aria-current":"page",children:t("div",{className:"flex items-center",children:[e("svg",{className:"w-3 h-3 text-gray-400 mx-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e("span",{className:"ml-1 text-sm font-medium text-gray-500 md:ml-2",children:s.name})]})})]})})}),t("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t("div",{className:"lg:col-span-2",children:[t("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-6",children:[t("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e("h2",{className:"text-xl font-semibold text-gray-800",children:"Détails du projet"}),e("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${(e=>{switch(e){case"en attente":return"bg-gray-100 text-gray-800";case"en cours":return"bg-blue-100 text-blue-800";case"terminé":return"bg-green-100 text-green-800";case"annulé":return"bg-red-100 text-red-800";default:return"bg-indigo-100 text-indigo-800"}})(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),t("div",{className:"p-6",children:[t("div",{className:"mb-6",children:[e("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:s.name}),t("div",{className:"mb-4",children:[t("div",{className:"flex justify-between items-center mb-2",children:[e("span",{className:"text-sm font-medium text-gray-700",children:"Progression du projet"}),t("span",{className:"text-sm font-bold text-gray-900",children:[s.manual_progress||0,"%"]})]}),e("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e("div",{className:"h-3 rounded-full transition-all duration-500 "+(m=s.manual_progress||0,m<30?"bg-red-500":m<70?"bg-yellow-500":"bg-green-500"),style:{width:`${s.manual_progress||0}%`}})})]}),l.length>0&&t("div",{children:[t("div",{className:"flex justify-between items-center mb-2",children:[e("span",{className:"text-sm text-gray-600",children:"Progression des tâches"}),t("span",{className:"text-sm text-gray-600",children:[i,"%"]})]}),e("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${i}%`}})})]})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[t("div",{children:[e("h6",{className:"text-sm font-medium text-gray-500 mb-1",children:"Date de début"}),e("p",{className:"text-gray-800",children:n(s.start_date)})]}),t("div",{children:[e("h6",{className:"text-sm font-medium text-gray-500 mb-1",children:"Date de fin"}),e("p",{className:"text-gray-800",children:n(s.end_date)})]})]}),t("div",{className:"mb-6",children:[e("h6",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"}),e("p",{className:"text-gray-800",children:s.description||"Aucune description disponible."})]}),s.notes&&t("div",{className:"mb-4",children:[e("h6",{className:"text-sm font-medium text-gray-500 mb-1",children:"Notes"}),e("p",{className:"text-gray-800",children:s.notes})]})]})]}),t("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-6",children:[e("div",{className:"px-6 py-4 border-b border-gray-200",children:t("h2",{className:"text-lg font-semibold text-gray-800",children:["Tâches (",l.length,")"]})}),e("div",{className:"p-6",children:0===l.length?t("div",{className:"text-center py-8",children:[e("div",{className:"mx-auto bg-gray-100 rounded-full p-3 w-16 h-16 flex items-center justify-center mb-4",children:e("i",{className:"fas fa-tasks text-gray-400 text-2xl"})}),e("h5",{className:"text-lg font-medium text-gray-700 mb-1",children:"Aucune tâche disponible"}),e("p",{className:"text-gray-500 text-sm",children:"Aucune tâche n'a encore été créée pour ce projet."})]}):e("div",{className:"overflow-x-auto",children:t("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:t("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priorité"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Échéance"})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(a=>t("tr",{children:[e("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.name}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(a.is_completed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:a.is_completed?"Terminée":"En cours"})}),e("td",{className:"px-6 py-4 whitespace-nowrap",children:e("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${d(a.priority)}`,children:a.priority?a.priority.charAt(0).toUpperCase()+a.priority.slice(1):"N/A"})}),e("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n(a.due_date)})]},a.id))})]})})})]})]}),t("div",{className:"lg:col-span-1",children:[t("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-6",children:[e("div",{className:"px-6 py-4 border-b border-gray-200",children:e("h2",{className:"text-lg font-semibold text-gray-800",children:"Équipe du projet"})}),e("div",{className:"p-6",children:s.assignedUsers&&s.assignedUsers.length>0?e("ul",{className:"divide-y divide-gray-200",children:s.assignedUsers.map((a,r)=>t("li",{className:"py-3 flex items-center",children:[e("div",{className:"w-10 h-10 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center font-medium mr-3",children:a.name.charAt(0)}),t("div",{children:[e("p",{className:"text-sm font-medium text-gray-900",children:a.name}),e("p",{className:"text-xs text-gray-500",children:a.role})]})]},r))}):t("div",{className:"text-center py-8",children:[e("div",{className:"mx-auto bg-gray-100 rounded-full p-3 w-16 h-16 flex items-center justify-center mb-4",children:e("i",{className:"fas fa-users text-gray-400 text-2xl"})}),e("h5",{className:"text-lg font-medium text-gray-700 mb-1",children:"Aucun membre assigné"}),e("p",{className:"text-gray-500 text-sm",children:"Aucun membre n'a encore été assigné à ce projet."})]})})]}),t("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-6",children:[e("div",{className:"px-6 py-4 border-b border-gray-200",children:e("h2",{className:"text-lg font-semibold text-gray-800",children:"Statistiques"})}),t("div",{className:"p-6",children:[t("div",{className:"mb-4",children:[e("h6",{className:"text-sm font-medium text-gray-500 mb-1",children:"Tâches terminées"}),t("p",{className:"text-gray-800 font-medium",children:[c," / ",l.length]})]}),t("div",{className:"mb-4",children:[e("h6",{className:"text-sm font-medium text-gray-500 mb-1",children:"Jours restants"}),e("p",{className:"font-medium "+((()=>{if(!s.end_date)return!1;return new Date(s.end_date)<new Date})()?"text-red-600":"text-gray-800"),children:(()=>{if(!s.end_date)return"Non défini";const e=new Date(s.end_date)-new Date,t=Math.ceil(e/864e5);return t>0?`${t} jours`:t<0?`Dépassé de ${Math.abs(t)} jours`:"Aujourd'hui"})()})]}),s.budget&&t("div",{children:[e("h6",{className:"text-sm font-medium text-gray-500 mb-1",children:"Budget"}),e("p",{className:"text-gray-800 font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(s.budget)})]})]})]}),t("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b border-gray-200",children:e("h2",{className:"text-lg font-semibold text-gray-800",children:"Support"})}),t("div",{className:"p-6",children:[e("p",{className:"text-gray-600 mb-4",children:"Vous avez des questions ou besoin d'aide concernant ce projet?"}),t(a,{href:`/client/tickets/create?project_id=${s.id}`,className:"inline-flex items-center justify-center w-full px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e("i",{className:"fas fa-ticket-alt mr-2"})," Créer un nouveau ticket"]})]})]})]})]})]})});var m}export{s as default};
